<!-- offcanvas-navbar/index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.88.1">
  <title>통합 어드민 관리</title>


  <!-- Bootstrap core CSS -->
  <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
  <script src="./assets/js/bootstrap.bundle.min.js"></script>
  <!-- Vuejs -->
  <script src="https://unpkg.com/vue@2.1.3/dist/vue.js"></script>
  <!-- lodash -->
  <script src="https://unpkg.com/lodash@4.13.1/lodash.min.js"></script>
  <!-- Jquery -->
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>

</head>
<body class="bg-light">

  <!-- 템플릿 스타일 조정 : Custom styles for this template -->
  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
    html,
    body {
      overflow-x: hidden; /* Prevent scroll on narrow devices */
    }

    body {
      padding-top: 56px;
    }

    @media (max-width: 991.98px) {
      .offcanvas-collapse {
        position: fixed;
        top: 56px; /* Height of navbar */
        bottom: 0;
        left: 100%;
        width: 100%;
        padding-right: 1rem;
        padding-left: 1rem;
        overflow-y: auto;
        visibility: hidden;
        background-color: #343a40;
        transition: transform .3s ease-in-out, visibility .3s ease-in-out;
      }
      .offcanvas-collapse.open {
        visibility: visible;
        transform: translateX(-100%);
      }
    }

    .nav-scroller {
      position: relative;
      z-index: 2;
      height: 2.75rem;
      overflow-y: hidden;
    }

    .nav-scroller .nav {
      display: flex;
      flex-wrap: nowrap;
      padding-bottom: 1rem;
      margin-top: -1px;
      overflow-x: auto;
      color: rgba(255, 255, 255, .75);
      text-align: center;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
    }

    .nav-underline .nav-link {
      padding-top: .75rem;
      padding-bottom: .75rem;
      font-size: .875rem;
      color: #6c757d;
    }

    .nav-underline .nav-link:hover {
      color: #007bff;
    }

    .nav-underline .active {
      font-weight: 500;
      color: #343a40;
    }

    .bg-purple {
      background-color: #6f42c1;
    }

    .fade-enter-active, .fade-leave-active {
      transition: opacity .5s;
    }
    .fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {
      opacity: 0;
    }

    [v-cloak] {
      display: none;
      /*background-color: red;*/
    }
  </style>

  <!-- header -->
  <div id="app_layout" v-cloak>
    <!-- 상단 메뉴 -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark" aria-label="Main navigation">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">통합 관리자</a>
        <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <template v-for="item in topmenu">
              <li v-if="item.type=='link'" class="nav-item">
                <a :href="item.href" :class="{active:item.active}" class="nav-link" aria-current="page">{{item.title}}</a>
              </li>
              <li v-else-if="item.type=='dropdown'" class="nav-item dropdown">
                <a v-bind:class="{active:item.active}" class="nav-link dropdown-toggle" href="#" id="dropdown01" data-bs-toggle="dropdown" aria-expanded="false">{{item.title}}</a>
                <ul class="dropdown-menu" aria-labelledby="dropdown01">
                  <li v-for="dropitem in item.dropmenu"><a class="dropdown-item" :href="dropitem.href">{{dropitem.title}}</a></li>
                </ul>
              </li>
            </template>
          </ul>
        </div>
      </div>
    </nav>
    <!-- 즐겨찾기 : bookmark -->
    <div v-if="bookmark.length" class="nav-scroller bg-body shadow-sm">
      <nav class="nav nav-underline" aria-label="Secondary navigation">
        <a v-for="item in bookmark" class="nav-link" :href="item.href">
          {{item.title}}
          <span v-if="item.balloon" class="badge bg-light text-dark rounded-pill align-text-bottom">{{item.balloon}}</span>
        </a>

      </nav>
    </div>
  </div>

  <!-- body -->
  <div id="app_content" v-cloak>
    <!-- 컨텐츠 -->
    <main class="container">
      <!-- 권한받은 어드민 -->
      <div class="my-3 p-3 bg-body rounded shadow-sm">
        <h6 class="border-bottom pb-2 mb-0">간편 리스트 : 권한받은 어드민</h6>

        <div v-for="admin in admins_permitted" class="d-flex text-muted pt-3">
          <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false">
            <title>Placeholder</title>
            <rect width="100%" height="100%" fill="#007bff"/>
            <text x="50%" y="50%" fill="#007bff" dy=".3em">32x32</text>
          </svg>

          <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
            <div class="d-flex justify-content-between">
              <strong class="text-gray-dark">{{admin.title}}</strong>
              <div class="btn-group">
                <button type="button" class="btn btn-sm btn-outline-secondary" @click.prevent="search_admin_service(admin)">상세 리스트 검색</button>
                <button type="button" class="btn btn-sm btn-outline-secondary" @click="gotoAdminPage(admin)">보기</button>
              </div>
            </div>
            <span class="d-block">{{admin.subtitle}}</span>
          </div>
        </div>

        <small class="d-block text-end mt-3">
          <a href="javascript:alert('작업중');void(0);">펼치기</a>
        </small>

      </div>
      <!-- 간편 리스트 : 권한 받을 어드민 -->
      <div class="my-3 p-3 bg-body rounded shadow-sm">
        <h6 class="border-bottom pb-2 mb-0">간편 리스트 : 권한 받을 어드민</h6>

        <div v-for="admin in admins_not_permitted" class="d-flex text-muted pt-3">
          <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false">
            <title>Placeholder</title>
            <rect width="100%" height="100%" fill="#007bff"/>
            <text x="50%" y="50%" fill="#007bff" dy=".3em">32x32</text>
          </svg>

          <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
            <div class="d-flex justify-content-between">
              <strong class="text-gray-dark">{{admin.title}}</strong>
              <div class="btn-group">
                <button type="button" class="btn btn-sm btn-outline-secondary" @click.prevent="search_admin_service(admin)">상세 리스트 검색</button>
                <button type="button" class="btn btn-sm btn-outline-secondary" @click="gotoAdminPage(admin)">보기</button>
              </div>
            </div>
            <span class="d-block">{{admin.subtitle}}</span>
          </div>
        </div>

        <small class="d-block text-end mt-3">
          <a href="javascript:alert('작업중');void(0);">펼치기</a>
        </small>
      </div>
      <!-- 상세 리스트 : 어드민 전체 리스트 - 검색 -->
      <div class="my-3 p-3 bg-body rounded shadow-sm">
        <h6 class="border-bottom pb-2 mb-2">상세 리스트 : 어드민 전체 리스트 - 검색</h6>
        <div class="d-flex mb-2 border-bottom">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text">검색 입력</span>
            </div>
            <input class="form-control me-2 bg-light" type="search" placeholder="어드민 검색하세요." v-model="text_admin_search_word" >
          </div>
        </div>

        <div class="container">
          <div v-if="admins_filtered.length" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
            <div v-for="admin in admins_filtered" class="col">
              <div class="card shadow-sm">
                <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
                  <title>{{admin.title}}</title>
                  <rect width="100%" height="100%" fill="#55595c"/>
                  <text x="50%" y="50%" fill="#eceeef" dy=".3em">{{admin.title}}</text>
                </svg>

                <div class="card-body">
                  <p class="card-text">{{admin.subtitle}}</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="btn-group">
                      <button type="button" class="btn btn-sm btn-outline-secondary" @click="show_modalRequestAuthorityMember(admin)">가이드</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary" @click="gotoAdminPage(admin)">보기</button>
                    </div>
                    <small class="text-muted">by {{admin.manager}}</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div v-else class="row p-3">
            검색된 어드민은 없습니다.
          </div>
        </div>
      </div>
    </main>


    <!-- Button trigger modal -->
    <button type="button" class="d-none btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalRequestAuthorityMember">
      Launch demo modal
    </button>

    <!-- Modal -->
    <div id="modalRequestAuthorityMember" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">가이드 : {{modals.guide.title}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" v-html="modals.guide.desc">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
<script>
$( document ).ready(function() {

  window.vue_layout = new Vue({
    el: '#app_layout',
    data: {
      topmenu : [
        {title:'Dashboard', active:true, type:'link', href:'?Dashboard', page_rules:['html/iadmin/index.html?Dashboard']}
        ,{title:'Notifications', active:false, type:'link', href:'?Notifications', page_rules:['html/iadmin/index.html?Notifications']}
        ,{title:'Profile', active:false, type:'link', href:'?Profile', page_rules:['html/iadmin/index.html?Profile']}
        ,{title:'Switch account', active:false, type:'link', href:'?Switch account', page_rules:['html/iadmin/index.html?Switch']}
        ,{title:'Settings', active:false, type:'dropdown', href:'#Settings', page_rules:['html/iadmin/index.html?Action','html/iadmin/index.html?Another','html/iadmin/index.html?Something'], dropmenu: [
            {title:'Action', type:'link', href:'?Action'},
            {title:'Another action', type:'link', href:'?Another action'},
            {title:'Something else here', type:'link', href:'#Something else here'},
          ]
        }
      ],
      bookmark : [
        {title:'알림', href:'#알림', balloon:'4'}
        ,{title:'Friends', href:'#Friends', balloon:'27'}
        ,{title:'즐겨찾기#1', href:'#1', balloon:null}
        ,{title:'즐겨찾기#2', href:'#2', balloon:false}
        ,{title:'즐겨찾기#3', href:'#3', balloon:''}
        ,{title:'즐겨찾기#4', href:'#4', balloon:''}
        ,{title:'즐겨찾기#5', href:'#5', balloon:''}
        ,{title:'즐겨찾기#6', href:'#6', balloon:''}
        ,{title:'즐겨찾기#7', href:'#7', balloon:''}
      ]
    },
    methods: {},
    mounted: function(){
      var url = window.location.href;
      _.forEach(this.topmenu, function(item){
        var active = false;
        _.forEach(item.page_rules, function(role){
          if (url.indexOf(role) >= 0) active=true;
        })
        item.active = active;
      });
    }
  });

  window.vue_content = new Vue({
    el: '#app_content',
    data: {
      text_admin_search_word: '',
      admin_services : [
        {id:1, title:'제목: 통합멤버어드민', manager:'플랫폼서비스개발팀', href:'https://member.dangi.co.kr/adm', subtitle: 'subtitle: 통합멤버 어드민', guide:'통합멤버 어드민 가이드 내용 입력해주세요.'}
        ,{id:2, title:'제목: CS 어드민', manager:'플랫폼서비스개발팀', href:'https://admin-cs.dangi.co.kr/admin/index', subtitle: 'subtitle: CS 어드민', guide:'CS 어드민 가이드 내용 입력해주세요.'}
        ,{id:3, title:'제목: 빌링어드민', manager:'플랫폼서비스개발팀', href:'https://billadm.dangi.co.kr/', subtitle: 'subtitle: 빌링어드민', guide:'빌링어드민 가이드 내용 입력해주세요.'}
        ,{id:4, title:'제목: 통합관리자', manager:'플랫폼서비스개발팀', href:'#', subtitle: 'subtitle: 통합 관리자', guide:'통합 관리자 가이드 내용 입력해주세요.'}
        ,{id:5, title:'제목: BI 어드민', manager:'플랫폼서비스개발팀', href:'#', subtitle: 'subtitle: BI어드민', guide:'BI어드민 가이드 내용 입력해주세요.'}
        ,{id:6, title:'제목: 영단기 어드민', manager:'단기서비스개발팀', href:'https://eng.conects.com/adm', subtitle: 'subtitle: 영단기 어드민', guide: '요청방식 : <br> 서비스 <a href="https://eng.conects.com/" target="_blank">영단기</a> <a href="https://eng.conects.com/adm" target="_blank">어드민</a>은 단기 서비스 개발팀에서 담당하고 있습니다. 해당 개발팀에게 권한 부여 요청 가능합니다. <br>'
        }
        ,{id:14, title:'긴문장', manager:'단기 서비스 개발팀', href:'#', subtitle: '긴문장: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.', guide:'긴문장: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.', }
      ],
      myadmin : [1,6,4],
      modals : {
        guide: {modal_instance:null, title:'', desc:''}
      }
    },
    methods: {
      search_admin_service: function(admin){
        this.text_admin_search_word = admin.title;
      },
      show_modalRequestAuthorityMember: function(admin) {
        this.modals.guide.title = admin.title;
        this.modals.guide.desc = admin.guide;
        this.modals.guide.modal_instance.show();
      },

      gotoAdminPage: function(admin) {
        var a = document.createElement("a");
        a.setAttribute("target",  '_blank');
        a.setAttribute("href", admin.href);
        a.click();
      },
      gotoAdminLoginForm: function(user_id, user_pw){
        var form = document.createElement("form");
        form.setAttribute("method", 'post');
        form.setAttribute("action", 'https://my.conects.com/admin/login?redirect_url=https://eng.conects.com/adm/login/in');

        var redirect_url = document.createElement("input");
        redirect_url.setAttribute("type", "hidden");
        redirect_url.setAttribute("name", 'redirect_url');
        redirect_url.setAttribute("value", 'https://eng.conects.com/adm/login/in');
        form.appendChild(redirect_url);

        var input_user_id = document.createElement("input");
        input_user_id.setAttribute("type", "hidden");
        input_user_id.setAttribute("name", 'user_id');
        input_user_id.setAttribute("value", 'mw.lim');
        form.appendChild(input_user_id);

        var input_user_pw = document.createElement("input");
        input_user_pw.setAttribute("type", "hidden");
        input_user_pw.setAttribute("name", 'user_pw');
        input_user_pw.setAttribute("value", user_pw);
        form.appendChild(input_user_pw);

        //Move the submit function to another variable so that it doesn't get overwritten.
        form._submit_function_ = form.submit;

        document.body.appendChild(form);
        form._submit_function_();
      },
      submitAdminLoginForm: function(user_id, user_pw){
        var form = document.createElement("form");
        form.setAttribute("method", 'post');
        form.setAttribute("action", 'https://my.conects.com/admin/login/ldap_in');

        var redirect_url = document.createElement("input");
        redirect_url.setAttribute("type", "hidden");
        redirect_url.setAttribute("name", 'redirect_url');
        redirect_url.setAttribute("value", 'https://eng.conects.com/adm/login/in');
        form.appendChild(redirect_url);

        var input_user_id = document.createElement("input");
        input_user_id.setAttribute("type", "hidden");
        input_user_id.setAttribute("name", 'user_id');
        input_user_id.setAttribute("value", user_id);
        form.appendChild(input_user_id);

        var input_user_pw = document.createElement("input");
        input_user_pw.setAttribute("type", "hidden");
        input_user_pw.setAttribute("name", 'user_pw');
        input_user_pw.setAttribute("value", user_pw);
        form.appendChild(input_user_pw);

        //Move the submit function to another variable so that it doesn't get overwritten.
        form._submit_function_ = form.submit;

        document.body.appendChild(form);
        form._submit_function_();
      }
    },
    computed: {
      admins_filtered: function(){

        var txt = _.toLower(_.trim(this.text_admin_search_word));

        if (!txt) {
          return this.admin_services;
        } else {
          return _.filter(this.admin_services, function(o) {
            var title = _.toLower(o.title);
            return title.indexOf(txt) >= 0;
          });
        }
      },
      admins_permitted: function(){
        var ids = this.myadmin;
        return _.filter(this.admin_services, function(o) {
          return _.includes(ids, o.id);
        });
      },
      admins_not_permitted: function(){
        var ids = this.myadmin;
        return _.filter(this.admin_services, function(o) {
          return ! _.includes(ids, o.id);
        });
      }
    },
    mounted: function(){
      this.modals.guide.modal_instance = new bootstrap.Modal(document.getElementById('modalRequestAuthorityMember'), {keyboard: false});
    }
  });
  
})

</script>
</body>
</html>
